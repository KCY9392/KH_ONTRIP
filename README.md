

# KH_ONTRIP Project
## :busts_in_silhouette: íŒ€ëª…: ì‹œë‚˜ë¸Œë¡œ
ì‹œë‚˜ë¸Œë¡œë€ ì²œì²œíˆ ì¡°ê¸ˆì”© ë¶€ì¡±í•œ ë¶€ë¶„ì„ ì„œë¡œ ì±„ì›Œë‚˜ê°€ì„œ ì„±ì¥í•´ë‚˜ê°„ë‹¤ëŠ” ì˜ë¯¸ë¡œ,
ì €í¬ íŒ€ì›ë“¤ì´ ì„œë¡œ ë¶€ì¡±í•œ ë¶€ë¶„ì„ ì±„ì›Œì£¼ë©°,ì ì  ì„±ì¥í•´ë‚˜ê°€ì„œ í€„ë¦¬í‹° ì¢‹ì€ í”„ë¡œì íŠ¸ë¥¼ í•´ë‚´ìëŠ” ì˜ë¯¸ë¡œ íŒ€ëª…ì„ ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
### [OnTrip] ì—¬í–‰ì½”ìŠ¤ ì¶”ì²œ & ì˜ˆì•½ ì›¹ì‚¬ì´íŠ¸

<br>
<img src="https://user-images.githubusercontent.com/113049166/217443399-0394c1cb-66bf-4bf1-a4b9-4de63cdebeea.png">

<br>

## ğŸ‘ í”„ë¡œì íŠ¸ì†Œê°œ

 <img src="https://user-images.githubusercontent.com/113049166/217443263-16ab6f38-9476-4926-a6f1-1cd5d70a70b5.png" width="80%" height="20%">

<br>

## <img src="https://user-images.githubusercontent.com/113049166/222700339-680fc1d0-6047-48e2-8f3e-4c55c9916e82.png" width="35px" height="35px"> ì—…ë¬´ë¶„ë‹´

 <img src="https://user-images.githubusercontent.com/113049166/222875251-f172a0ef-8dea-492e-bf31-1d05af0c8709.png" width="80%" height="20%">

<table style="margin-left: auto; margin-right: auto; width: 600px; height: 200px;">
            <tr>
                <td>ì´ë¦„</td>
                <td>ê¹€ì±„ì˜</td>
                <td>ì†¡ì§€í˜¸</td>
                <td>ì´ë²”ì„</td>
                <td>í™©ì¢…ìˆ˜</td>
                <td>ì¡°ì„±ìš°</td>
            </tr>
            <tr>
                <td>GitHub</td>
                <td><a href="https://github.com/KCY9392">@KCY9392</a></td>
                <td><a href="https://github.com/SongJiho1998">@SongJiho1998</a></td>
                <td><a href="https://github.com/qjatjr0513">@qjatjr0513</a></td>
                <td><a href="https://github.com/prodaniel93">@prodaniel93</a></td>
                <td><a href="https://github.com/jay11234511">@jay11234511</a></td>
            </tr>
  </table>
  
  <br>
  
## :computer: ê°œë°œí™˜ê²½
### :pencil: Front-End
<div>
	<img src="https://img.shields.io/badge/HTML5-E34F26?style=flat&logo=HTML5&logoColor=white" />
	<img src="https://img.shields.io/badge/CSS3-1572B6?style=flat&logo=CSS3&logoColor=white" />
	<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=flat&logo=JavaScript&logoColor=white" />
	<img src="https://img.shields.io/badge/jQuery-0769AD?style=flat&logo=jQuery&logoColor=white" />	
	<img src="https://img.shields.io/badge/Bootstrap-7952B3?style=flat&logo=Bootstrap&logoColor=white" />
</div>
	
   ### :pencil: Back-End
<div>
	<img src="https://img.shields.io/badge/Java-007396?style=flat&logo=Java&logoColor=white" />
	<img src="https://img.shields.io/badge/Oracle-F80000?style=flat&logo=Oracle&logoColor=white" />
	<img src="https://img.shields.io/badge/Apache Tomcat-F8DC75?style=flat&logo=Apache Tomcat&logoColor=white" />
</div>

  ## :computer: Tool	
<div>
   <img src="https://img.shields.io/badge/Eclipse IDE-2C2255?style=flat&logo=Eclipse IDE&logoColor=white" />
	<img src="https://img.shields.io/badge/Discord-5865F2?style=flat&logo=Discord&logoColor=white" />
	<img src="https://img.shields.io/badge/GitHub-181717?style=flat&logo=GitHub&logoColor=white" />	
</div>

<br>

## :book: í”„ë¡œì íŠ¸ ì‘ì—… ê¸°ê°„
- 2022.10.24-2022.10.27 : í”„ë¡œì íŠ¸ ê¸°íš ë° ìš”êµ¬ì‚¬í•­ ë¶„ì„
- 2022.10.28-2022.11.02 : í™”ë©´ì„¤ê³„ 
- 2022.11.03-2022.11.08 : DBì„¤ê³„
- 2022.11.09-2022.11.28 : ê¸°ëŠ¥ êµ¬í˜„
  
<br>

## ğŸ˜€ ER-DIAGRAM , USECASE-DIAGRAM
<table>
<tr>
	<th>
	  ER-DIAGRAM
	</th>
	<th>
	  USECASE-DIAGRAM
	</th>
</tr>
<tr>
	<td width="50%">
		<img src="https://user-images.githubusercontent.com/113049166/222875314-82417840-b0bb-4895-a153-c651c81f266c.png" width="600" height="200"/>
	</td>
	<td width="50%">
		<img src="https://user-images.githubusercontent.com/113049166/222875346-0b5c2707-4995-49a0-a1ad-518aaf23cc20.jpg" width="600" height="200"></td>
</tr>
</table>

<br>

## ğŸ˜† UI
<table>
<tr>
	<th>
		ì‹œì‘í˜ì´ì§€
	</th>
	<th>
		ë©”ì¸í˜ì´ì§€
	</th>

</tr>
<tr>
	<td width="30%">
		<img src="https://user-images.githubusercontent.com/106515028/218248617-77700c59-5ae9-49ec-ab5d-9507038417aa.png" width="600" height="200"/>
	</td>
	<td width="30%">
		<img src="https://user-images.githubusercontent.com/106515028/218249053-47be0b72-7aa1-48a7-a31d-48f4730cabd8.png" width="600" height="200"></td>

</tr>
<tr>
	<th>
	    ì§€ì—­ì •ë³´
	</th>
	<th>í•´ë‹¹ì§€ì—­ì˜ ì‹œì„¤ì •ë³´</th>
</tr>
<tr>
	<td>
	 <img src="https://user-images.githubusercontent.com/106515028/218249213-f37d2b31-906f-489d-953d-fd4ba914fa7c.png" width="600" height="200"/>
	</td>
	<td>
	  <img src="https://user-images.githubusercontent.com/106515028/218249423-8deb878e-c599-4537-ae02-3a8784b558bd.png" width="600" height="200"/>
	</td>
</tr>
<tr>
	<th>ì‹œì„¤ì´ìš©í›„ê¸°
	</th>
	<th>
	    ì‹œì„¤ì´ìš©í›„ê¸° ìƒì„¸
	</th>
</tr>
<tr>
	<td>
	 <img src="https://user-images.githubusercontent.com/106515028/218249213-f37d2b31-906f-489d-953d-fd4ba914fa7c.png" width="600" height="200"/>
	</td>
	<td>
	  <img src="https://user-images.githubusercontent.com/106515028/218249423-8deb878e-c599-4537-ae02-3a8784b558bd.png" width="600" height="200"/>
	</td>
</tr>
<tr>
	<th>ì‹œì„¤ì„ íƒì°½
	</th>
	<th>
	    ì˜ˆì•½ì°½
	</th>
</tr>
<tr>
	<td>
	   <img src="https://user-images.githubusercontent.com/113049166/222876421-c01e6293-cd9d-400f-8279-994c92efa151.png" width="600" height="200"/>
	</td>
	<td>
	   <img src="https://user-images.githubusercontent.com/113049166/222876445-49fa0704-c9c9-4973-a64e-10beb288cda5.png" width="600" height="200"/>
	</td>
<tr>
<tr>
	<th>ì˜ˆì•½í™•ì¸ì°½
	</th>
	<th>
	    ë§ˆì´í˜ì´ì§€
	</th>
</tr>
<tr>
	<td>
	   <img src="https://user-images.githubusercontent.com/113049166/222876477-9cbc17d6-c3af-43af-b4fa-c2f208fdcb03.png" width="600" height="200"/>
	</td>
	<td>
	   <img src="https://user-images.githubusercontent.com/113049166/222876488-c1c6b3d2-a06f-4c2a-ace5-0bea2a0476c6.png" width="600" height="200"/>
	</td>
<tr>	
</table>

<br>
  
## ğŸŒŸ ì£¼ìš”ê¸°ëŠ¥
#### 1) í•´ì‹œíƒœê·¸ë¥¼ ì ìš©í•œ ê²€ìƒ‰ ê¸°ëŠ¥

<img src="https://user-images.githubusercontent.com/113049166/222877486-6715c38d-d6e7-41e0-aaa3-38081883d7bc.png" width="80%" height="20%">


#### /* í•´ì‹œíƒœê·¸ ê²€ìƒ‰ì°½ Form */
	<form action="<%=request.getContextPath() %>/searchHashPlace.se" id="enroll-form" method="post">
	   <div style="box-sizing:border-box; width:500px; margin:auto;">
	       <div class="input-group mb-3" style="width:700px; height:50px;">
		  <input style="border:none !important;" type="text" id="search12" class="form-control" aria-label="Recipient's username" aria-describedby="button-addon2" name='hash' placeholder="í•´ì‹œíƒœê·¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”">
		  <input type="hidden" name='hidden_hash'>
		  <button style="border:none; color:white; background-color:lightgrey;" class="btn btn-outline-secondary btn-search" type="submit" id="button-addon2">ê²€ìƒ‰</button>
		</div>
		<div>
	        	<span style=" width:450px; margin-left:35px; color:lightgrey;"><%= hashTag %></span>
	        </div>
	   </div> 
	</form>
	
#### /* íƒœê·¸ ì¶”ê°€ ì‹œ, ì´ë²¤íŠ¸ ë°œìƒ script */
	<script>
            const input = document.querySelector('input[name=hash]');
       
            let tagify = new Tagify(input); // initialize Tagify
       
            let hidden_hash = document.querySelector('input[name=hidden_hash]');
            
	        // íƒœê·¸ê°€ ì¶”ê°€ë˜ë©´ ì´ë²¤íŠ¸ ë°œìƒ
            tagify.on('add', function() {
		    console.log(tagify.value); // ì…ë ¥ëœ íƒœê·¸ ì •ë³´ ê°ì²´
		    let tag = "";
		    let arr = tagify.value;
		    for(let i =0; i<arr.length; i++){ //{value: íƒœê·¸ëª…, tagid : ? , asda:?}
			tag += arr[i]["value"]+  ( i != arr.length-1 ?  "," : "")
			hidden_hash.value = tag;
		    }
             })
   	</script>
	
#### /* ê²€ìƒ‰ë²„íŠ¼ ëˆŒë €ì„ ê²½ìš°, ë„˜ì–´ê°€ëŠ” Controller */
	@WebServlet("/searchHashPlace.se")
	public class SearchHashPlaceController extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
	public SearchHashPlaceController() {
		super();
	}

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		
	    // í•´ì‹œíƒœê·¸ ìƒì„±
	    String hash = (String) request.getParameter("hidden_hash");
	    String[] split_hash;
	    if(hash != null) {
		split_hash = hash.split(",");
			
		// ê²€ìƒ‰í•œ ì‹œì„¤ ì‚¬ì§„ í•´ì‹œíƒœê·¸ë¡œ ë¶ˆëŸ¬ì˜¤ê¸°
		ArrayList<Image> placeHashPath = new PlaceService().searchHashPlacePath(split_hash);
		request.setAttribute("placeHashPath", placeHashPath);
			
		// ê²€ìƒ‰í•œ ì‹œì„¤ ì •ë³´ í•´ì‹œíƒœê·¸ë¡œ ë¶ˆëŸ¬ì˜¤ê¸°
		ArrayList<Place> placeHashInfo = new PlaceService().searchHashPlaceInfo(split_hash);
		request.setAttribute("placeHashInfo", placeHashInfo);
	     }
	     request.getRequestDispatcher("views/location/searchHashPlace.jsp").forward(request, response);
	}

	
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}
	
#### /* ì…ë ¥ê°’ì„ í†µí•œ DBë°ì´í„° select */
	<!-- í•´ì‹œíƒœê·¸ë¥¼ ì‚¬ìš©í•œ ê²€ìƒ‰ -->
   	<entry key="searchHashPlacePath">
   		SELECT FILE_NO, FILE_PATH, CHANGE_NAME
   		FROM "Image"
   		WHERE STATUS = 'Y' AND ORIGIN_NAME LIKE '%1%' AND PLC_CODE IN(SELECT s.PLC_CODE
                                                                FROM "HashStorage" s
                                                                JOIN "Hash" h USING(HAS_NO)
                                                                WHERE h.HAS_NAME IN(@))
   		ORDER BY PLC_CODE
   	</entry>
	
	
#### /* ë©”ì¸ì°½ì—ì„œ í•´ì‹œíƒœê·¸í‚¤ì›Œë“œí‚¤ì›Œë“œë¡œ ì‹œì„¤ ì •ë³´ ì°¾ê¸° */
   	public ArrayList<Place> searchHashPlaceInfo(String[] split_hash, Connection conn){
        	ArrayList<Place> placeHashInfo = new ArrayList<>();
        	String hash = "";
		for(int i=0; i<split_hash.length; i++) {
			hash += "?";
			if(i<split_hash.length-1) {
				hash += ",";
			}	
		}
      		PreparedStatement psmt = null;
      		ResultSet rset = null;
      
      		String sql = prop.getProperty("searchHashPlaceInfo");
      		sql = sql.replace("@",  hash);
      		
		try {
		   psmt = conn.prepareStatement(sql);
		   for(int i=0; i<split_hash.length; i++) {
					psmt.setString(i+1, split_hash[i]);
		   }
         	   rset = psmt.executeQuery();
         
        	   while(rset.next()) {
        	     placeHashInfo.add(new Place(
                       rset.getString("CATEGORY_CODE"),
                       rset.getString("PLC_NAME"),
                       rset.getString("PLC_ADDRESS"),
                       rset.getString("PLC_PNUMBER"),
                       rset.getString("DAREA_NAME")));
         	   }
      		} catch (SQLException e) {
         	e.printStackTrace();
      		} finally {
		 close(rset);
		 close(psmt);
	      }
	      return placeHashInfo;
	   }
	   
	   
	   



